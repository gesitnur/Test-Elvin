{"ast":null,"code":"// import 'uppy/dist/uppy.min.css'\n\n// import {\n//   Core,\n// } from 'uppy'\n\nimport Uppy from '@uppy/core';\nimport FileInput from '@uppy/file-input';\nimport ThumbnailGenerator from '@uppy/thumbnail-generator';\nimport ProgressBar from '@uppy/progress-bar';\nimport Informer from '@uppy/informer';\nvar Dashboard = require(\"@uppy/dashboard\");\nvar XHRUpload = require(\"@uppy/xhr-upload\");\nvar GoogleDrive = require(\"@uppy/google-drive\");\nfunction fileUpload(fileInput) {\n  console.log('aa');\n  var hiddenInput = document.querySelector('.upload-data'),\n    filePreview = document.querySelector('.file-preview'),\n    form = $(fileInput).parents('form'),\n    submitButton = document.getElementById('button-form-uppy'),\n    formGroup = fileInput.parentNode;\n  var attachment_url = window.location.origin + $('#attachment_url').data('url');\n  var authenticity_token = $('meta[name=\"csrf-token\"]').attr('content');\n  var compiledToken, compiledLink;\n  if (attachment_url.includes('?')) {\n    compiledToken = \"&authenticity_token=\".concat(authenticity_token);\n  } else {\n    compiledToken = \"?authenticity_token=\".concat(authenticity_token);\n  }\n\n  // compiledLink = `${attachment_url}${compiledToken}`;\n\n  // // remove our file input in favour of Uppy's\n  // formGroup.removeChild(fileInput)\n\n  var uppy = new Uppy({\n    autoProceed: true\n  });\n  // .use(FileInput, {\n  //   target: formGroup,\n  // })\n  // .use(Informer, {\n  //   target: formGroup,\n  // })\n  // .use(ProgressBar, {\n  //   target: filePreview.parentNode,\n  // })\n  // .use(XHRUpload, {\n  //   fieldName: 'files[]',\n  // })\n\n  uppy.on('upload-success', function (file, response) {\n    $('.file-preview').append(response.body.files_previews);\n  });\n\n  // uppy.on('upload-error', (file, error, response) => {\n  //   submitButton.removeAttribute(\"disabled\")\n  //   submitButton.innerHTML = \"Save\"\n  // })\n}\n\nexport default fileUpload;","map":{"version":3,"names":["Uppy","FileInput","ThumbnailGenerator","ProgressBar","Informer","Dashboard","require","XHRUpload","GoogleDrive","fileUpload","fileInput","console","log","hiddenInput","document","querySelector","filePreview","form","$","parents","submitButton","getElementById","formGroup","parentNode","attachment_url","window","location","origin","data","authenticity_token","attr","compiledToken","compiledLink","includes","uppy","autoProceed","on","file","response","append","body","files_previews"],"sources":["/home/gesit/Documents/Project/elvin/app/javascript/packs/fileMultiUpload.js"],"sourcesContent":["// import 'uppy/dist/uppy.min.css'\n\n// import {\n//   Core,\n// } from 'uppy'\n\nimport Uppy from '@uppy/core'\nimport FileInput from '@uppy/file-input'\nimport ThumbnailGenerator from '@uppy/thumbnail-generator'\nimport ProgressBar from '@uppy/progress-bar'\nimport Informer from '@uppy/informer'\nconst Dashboard = require(\"@uppy/dashboard\")\nconst XHRUpload = require(\"@uppy/xhr-upload\")\nconst GoogleDrive = require(\"@uppy/google-drive\")\n\nfunction fileUpload(fileInput) {\n  console.log('aa');\n  const hiddenInput = document.querySelector('.upload-data'),\n        filePreview = document.querySelector('.file-preview'),\n        form = $(fileInput).parents('form'),\n        submitButton = document.getElementById('button-form-uppy'),\n        formGroup = fileInput.parentNode;\n  var attachment_url    = window.location.origin + $('#attachment_url').data('url');\n\n  var authenticity_token = $('meta[name=\"csrf-token\"]').attr('content');\n  var compiledToken, compiledLink;\n\n  if (attachment_url.includes('?')) {\n    compiledToken = `&authenticity_token=${authenticity_token}`\n  } else {\n    compiledToken = `?authenticity_token=${authenticity_token}`\n  }\n\n  // compiledLink = `${attachment_url}${compiledToken}`;\n\n  // // remove our file input in favour of Uppy's\n  // formGroup.removeChild(fileInput)\n\n  const uppy = new Uppy({\n      autoProceed: true,\n    })\n    // .use(FileInput, {\n    //   target: formGroup,\n    // })\n    // .use(Informer, {\n    //   target: formGroup,\n    // })\n    // .use(ProgressBar, {\n    //   target: filePreview.parentNode,\n    // })\n    // .use(XHRUpload, {\n    //   fieldName: 'files[]',\n    // })\n\n  uppy.on('upload-success', (file, response) => {\n    $('.file-preview').append(response.body.files_previews);\n  });\n\n  // uppy.on('upload-error', (file, error, response) => {\n  //   submitButton.removeAttribute(\"disabled\")\n  //   submitButton.innerHTML = \"Save\"\n  // })\n}\n\nexport default fileUpload\n"],"mappings":"AAAA;;AAEA;AACA;AACA;;AAEA,OAAOA,IAAI,MAAM,YAAY;AAC7B,OAAOC,SAAS,MAAM,kBAAkB;AACxC,OAAOC,kBAAkB,MAAM,2BAA2B;AAC1D,OAAOC,WAAW,MAAM,oBAAoB;AAC5C,OAAOC,QAAQ,MAAM,gBAAgB;AACrC,IAAMC,SAAS,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAC5C,IAAMC,SAAS,GAAGD,OAAO,CAAC,kBAAkB,CAAC;AAC7C,IAAME,WAAW,GAAGF,OAAO,CAAC,oBAAoB,CAAC;AAEjD,SAASG,UAAU,CAACC,SAAS,EAAE;EAC7BC,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC;EACjB,IAAMC,WAAW,GAAGC,QAAQ,CAACC,aAAa,CAAC,cAAc,CAAC;IACpDC,WAAW,GAAGF,QAAQ,CAACC,aAAa,CAAC,eAAe,CAAC;IACrDE,IAAI,GAAGC,CAAC,CAACR,SAAS,CAAC,CAACS,OAAO,CAAC,MAAM,CAAC;IACnCC,YAAY,GAAGN,QAAQ,CAACO,cAAc,CAAC,kBAAkB,CAAC;IAC1DC,SAAS,GAAGZ,SAAS,CAACa,UAAU;EACtC,IAAIC,cAAc,GAAMC,MAAM,CAACC,QAAQ,CAACC,MAAM,GAAGT,CAAC,CAAC,iBAAiB,CAAC,CAACU,IAAI,CAAC,KAAK,CAAC;EAEjF,IAAIC,kBAAkB,GAAGX,CAAC,CAAC,yBAAyB,CAAC,CAACY,IAAI,CAAC,SAAS,CAAC;EACrE,IAAIC,aAAa,EAAEC,YAAY;EAE/B,IAAIR,cAAc,CAACS,QAAQ,CAAC,GAAG,CAAC,EAAE;IAChCF,aAAa,iCAA0BF,kBAAkB,CAAE;EAC7D,CAAC,MAAM;IACLE,aAAa,iCAA0BF,kBAAkB,CAAE;EAC7D;;EAEA;;EAEA;EACA;;EAEA,IAAMK,IAAI,GAAG,IAAIlC,IAAI,CAAC;IAClBmC,WAAW,EAAE;EACf,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEFD,IAAI,CAACE,EAAE,CAAC,gBAAgB,EAAE,UAACC,IAAI,EAAEC,QAAQ,EAAK;IAC5CpB,CAAC,CAAC,eAAe,CAAC,CAACqB,MAAM,CAACD,QAAQ,CAACE,IAAI,CAACC,cAAc,CAAC;EACzD,CAAC,CAAC;;EAEF;EACA;EACA;EACA;AACF;;AAEA,eAAehC,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}